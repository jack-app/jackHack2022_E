<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>VIrtual Sense</title>
    <script src="./js/sample.js"></script>
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <meta property="og:title" content="Virtual Sense" />
    <meta
      property="og:description"
      content="あなたのVirtual Senseを試すゲーム"
    />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://virtual-sense.herokuapp.com/" />
    <meta
      property="og:image"
      content="https://virtual-sense.herokuapp.com/static/logo.png"
    />
    <meta property="twitter:card" content="summary_large_image" />
  </head>
  <body>
    <script>
      const twitterShareButton = document.getElementById("twitterShareButton");
      twitterShareButton.addEventListener("click", () => {
        const tweetContents = "あなたのVirtual Senseは●●点でした！";
        const url = "https://virtual-sense.herokuapp.com/";
        window.open().location.href =
          "https://twitter.com/share?url=" +
          url +
          "&text=" +
          tweetContents +
          "&count=none&lang=ja";
      });
    </script>
    <div class="container">
      <div class="wrapper">
        <h1 class="resultletter">your Sense</h1>
        <table>
          <tr>
            <th></th>
            <th>第１問</th>
            <th>第２問</th>
            <!-- <th>第３問</th> -->
          </tr>
          <tr>
            <td>得点</td>
            <td><span id="first-score"></span>pt</td>
            <td><span id="second-score"></span>pt</td>
            <!-- <td>40pt</td> -->
          </tr>
        </table>
        <p class="totalscore">合計得点：<span id="total-score"></span>pt</p>
        <div class="resultbutton">
          <div class="smallbutton">
            <a
              href="./index.html"
              class="btn btn--orange btn--cubic btn--shadow"
              >タイトルに戻る</a
            >
          </div>
          <div class="smallbutton">
            <a href="./game.html" class="btn btn--orange btn--cubic btn--shadow"
              >リトライ</a
            >
          </div>
          <div class="smallbutton" style="margin: auto 15px">
            <a
              class="twitter-share-button"
              id="twitterShareButton"
              data-size="large"
              >Tweet</a
            >
            <script
              async
              src="https://platform.twitter.com/widgets.js"
              charset="utf-8"
            ></script>
          </div>
        </div>
      </div>
    </div>
    <script>
      let firstScore = document.getElementById("first-score");
      let firstScoreNum = localStorage.getItem("firstScoreNum");
      firstScoreNum = firstScoreNum ? firstScoreNum : 0;
      firstScore.innerHTML = firstScoreNum.toString();

      let secondScore = document.getElementById("second-score");
      let secondScoreNum = localStorage.getItem("secondScoreNum");
      secondScoreNum = secondScoreNum ? secondScoreNum : 0;
      secondScore.innerHTML = secondScoreNum.toString();

      let totalScore = document.getElementById("total-score");
      const totalScoreNum = parseInt(firstScoreNum) + parseInt(secondScoreNum);
      totalScore.innerHTML = totalScoreNum.toString();

      window.addEventListener("beforeunload", function (e) {
        /** 更新される直前の処理 */
        localStorage.clear();
      });
    </script>
  </body>
</html>
